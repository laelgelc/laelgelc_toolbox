# Phase 1 – PDF Scraper

## Overview

Phase 1 provides a simple PDF → text converter, implemented with:

- **Core** logic: `src/cl/pdf_scrape/core.py`;
- **CLI** entry point: `src/cl/pdf_scrape/cli.py`;
- **GUI** entry point (Tkinter): `src/cl/pdf_scrape/gui.py`.

The tool:

- Accepts a single PDF file or a directory containing PDFs;
- Extracts text using [PyMuPDF](https://pymupdf.readthedocs.io/);
- Writes `.txt` files with the same base name as each PDF.

## Data conventions

For examples and manual testing, the following folders are used:

- `data/pdf_scrape/input/`
  - Put example PDF files here (e.g. `example1.pdf`, `example2.pdf`);
- `data/pdf_scrape/output/`
  - Optional: specify as an explicit output directory;
  - If not used, `.txt` files are written next to their respective PDFs.

These locations are conventions only; the code works with any paths.

## Core behavior

The main API is:

``` bash
python from pathlib import Path from cl.pdf_scrape.core import pdfs_to_text
results = pdfs_to_text  latex_unknown_tag
```

Key points:

- `input_path` may be:
  - A single `.pdf` file;
  - A directory (non-recursive); all `.pdf` files in that directory are processed;
- `output_dir`:
  - If `None`, each `.txt` is created next to its PDF;
  - If a `Path`, all `.txt` files are written to that folder;
- `overwrite`:
  - `False` (default) → existing `.txt` files are **skipped**;
  - `True` → existing `.txt` files are overwritten;
- The function returns a list of `PdfToTextResult` objects with:
  - `pdf_path`;
  - `txt_path`;
  - `status`: `"created"`, `"skipped"`, or `"error"`;
  - `error`: the exception, if `status == "error"`.

## CLI usage

From the project root (with your environment activated):

Single file

``` bash
python -m cl.pdf_scrape data/pdf_scrape/input/example.pdf
```

Directory of PDFs

``` bash
python -m cl.pdf_scrape data/pdf_scrape/input/
```

Explicit output directory

``` bash
python -m cl.pdf_scrape data/pdf_scrape/input/ -o data/pdf_scrape/output/
```

Overwrite existing .txt files

``` bash
python -m cl.pdf_scrape data/pdf_scrape/input/ --overwrite
```

The CLI prints a summary:

- Total PDFs processed;
- How many were created, skipped, or errored;
- Per-file status lines.

To launch the GUI instead:

``` bash
python -m cl.pdf_scrape --gui
```

## GUI usage (Tkinter)

The GUI provides:

- **Select PDF file(s)…**  
  Choose one or more PDFs via file dialog; each is processed individually.

- **Select folder…**  
  Choose a directory; all `.pdf` files directly inside it are processed.

- **Overwrite existing .txt**  
  Toggles the same behaviour as the CLI `--overwrite` flag.

- **Log panel**  
  Displays per-file messages:

  - `[created] PDF → TXT`;
  - `[skipped] PDF (existing TXT)`;
  - `[error] PDF → TXT : error message`.

If any errors occurred, a warning dialog is shown after processing.

## Packaging with PyInstaller (Windows)

Once dependencies are installed in your environment (including `pymupdf`), you can produce standalone executables.

From the project root:

``` bash
pyinstaller --onefile -n pdf_scrape_cli src/cl/pdf_scrape/cli.py pyinstaller --onefile -n pdf_scrape_gui --windowed src/cl/pdf_scrape/gui.py
```

This generates:

- `dist/pdf_scrape_cli.exe` – console application;
- `dist/pdf_scrape_gui.exe` – GUI application (no console window).

### Notes

- `.spec` files generated by PyInstaller are ignored by `.gitignore` by default;
- If you need custom behavior (icon, version info, data files), you can:
  1. Run the above commands once;
  2. Edit the generated `.spec` files;
  3. Rebuild with `pyinstaller your_spec_file.spec`.
